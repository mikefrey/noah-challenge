<section id="results" class="px1200">
  <h2>RESULTS</h2>
  <h6>Updated {{ctrl.updatedAt | date: 'MMMM d @ h:mma'}}</h6>
  <div class="bars">
    <span></span>
    <span></span>
    <span></span>
  </div>
  <table>
    <thead>
      <tr>
        <th class="rank" ng-click="ctrl.sort('sortRank')">Rank</th>
        <th class="score" ng-click="ctrl.sort('sortRank')">Score</th>
        <th class="score" ng-click="ctrl.sort('sortMax')">Max</th>
        <th class="player" ng-click="ctrl.sort('sortName')">Name</th>
        <th class="cat" ng-repeat="cat in ctrl.categories | orderBy:'position'" data-tooltip="{{cat.name}}">
          <span ng-bind-html="cat.abbr" ng-click="ctrl.sort($index)"></span>
        </th>
      </tr>
    </thead>
    <tbody>
      <tr ng-repeat="ballot in ctrl.ballots">
        <td class="rank">{{ballot.rank}}</td>
        <td class="score">{{ballot.score}}</td>
        <td class="score">{{ballot.max}}</td>
        <td ng-if="!ctrl.game.locked" class="player">{{ballot | fullName}}</td>
        <td ng-if="ctrl.game.locked" class="player"><a ng-href="/ballot/{{ballot._id}}">{{ballot | fullName}}</a></td>
        <td class="cat" ng-repeat="points in ballot.points track by $index">{{points}}</td>
      </tr>
    </tbody>
    <tfoot>
      <tr>
        <td class="rank"></td>
        <td class="score"></td>
        <td class="name">Averages</td>
        <td class="cat" ng-repeat="cat in ctrl.categories | orderBy:'position'">{{cat.avg | number:1}}</td>
      </tr>
    </tfoot>
  </table>
</section>
